{"mappings":"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","sources":["src/js/pagination.js"],"sourcesContent":["const newsList = document.querySelector('.news-list');\n\nconst pg = document.getElementById('pagination');\nconst btnNextPg = document.querySelector('button.next-page');\nconst btnPrevPg = document.querySelector('button.prev-page');\n\nlet start = 0;\nlet end = 7;\n\nconst valuePage = {\n  curPage: 1, //текущая страница ЭТО ПЕРЕДАВАТЬ ДЛЯ СТАРТА\n  numLinksTwoSide: 1, //количество ссылок две стороны от выделенного до ...\n  totalPages: 10, // длинна массива данных, или свойство длинны объекта / на 7 и округленное до целого числа\n};\n\ndocument.addEventListener('DOMContentLoaded', async () => {\n  try {\n    const news = await fetchUsers();\n    console.log(news);\n    valuePage.totalPages = Math.ceil(news.results.length / 7);\n    renderNewsList(news);\n  } catch (error) {\n    console.log(error.message);\n  }\n});\n\n// https://api.nytimes.com/svc/news/v3/content/nyt/world.json?api-key=KAPQs6eCC914vuVn4Z5KoZgqCNfPIWAH\n\nconst fetchUsers = async () => {\n  const response = await fetch(\n    'https://api.nytimes.com/svc/mostpopular/v2/viewed/1.json?api-key=KAPQs6eCC914vuVn4Z5KoZgqCNfPIWAH'\n  );\n  const news = await response.json();\n  return news;\n};\n\nfunction renderNewsList(news) {\n  const markup = news.results\n    .slice(start, end)\n    .map(\n      user => `<li class=\"news-card\">\n       <p>${user.abstract}</p>\n      <a href=\"${user.url}\">Read more</a>\n      </li>`\n    )\n    .join('');\n  newsList.innerHTML = markup;\n}\n\n// ПАГИНАЦИЯ============================================\n\npagination();\n\n// ФУНКЦИЯ КЛИК============================================\n\npg.addEventListener('click', async e => {\n  try {\n    const news = await fetchUsers();\n\n    console.log(parseInt(e.target.dataset.page, 10));\n    if (e.target.dataset.page) {\n      const pageNumber = parseInt(e.target.dataset.page, 10);\n\n      valuePage.curPage = pageNumber;\n      //вызывается пагинация\n      pagination(valuePage);\n      console.log(valuePage);\n\n      start = (pageNumber - 1) * 7;\n      end = start + 7;\n\n      renderNewsList(news);\n      handleButtonLeft();\n      handleButtonRight();\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n});\n\n// DYNAMIC PAGINATION\nfunction pagination() {\n  const { totalPages, curPage, numLinksTwoSide: delta } = valuePage;\n\n  const range = delta + 4; // use for handle visible number of links left side\n  // использовать для обработки видимого количества ссылок слева\n\n  let render = '';\n  let renderTwoSide = '';\n  let dot = `<li class=\"pg-item\"><a class=\"pg-link\">...</a></li>`;\n  let countTruncate = 0; // use for ellipsis - truncate left side or right side\n  // использовать для многоточия - обрезать левую или правую сторону\n\n  // use for truncate two side\n  // используем для усечения двух сторон\n  const numberTruncateLeft = curPage - delta; //число Обрезать слева\n  const numberTruncateRight = curPage + delta; //число Обрезать слева\n\n  let active = '';\n  for (let pos = 1; pos <= totalPages; pos++) {\n    active = pos === curPage ? 'active' : '';\n\n    // truncate обрезать\n    if (totalPages >= 2 * range - 1) {\n      if (numberTruncateLeft > 3 && numberTruncateRight < totalPages - 3 + 1) {\n        // truncate 2 side\n        if (pos >= numberTruncateLeft && pos <= numberTruncateRight) {\n          renderTwoSide += renderPage(pos, active);\n        }\n      } else {\n        // truncate left side or right side\n        //обрезать левую или правую сторону\n        if (\n          (curPage < range && pos <= range) ||\n          (curPage > totalPages - range && pos >= totalPages - range + 1) ||\n          pos === totalPages ||\n          pos === 1\n        ) {\n          render += renderPage(pos, active);\n        } else {\n          countTruncate++;\n          if (countTruncate === 1) render += dot;\n        }\n      }\n    } else {\n      // not truncate\n      render += renderPage(pos, active);\n    }\n  }\n\n  if (renderTwoSide) {\n    renderTwoSide =\n      renderPage(1) + dot + renderTwoSide + dot + renderPage(totalPages);\n    pg.innerHTML = renderTwoSide;\n  } else {\n    pg.innerHTML = render;\n  }\n}\n\n// ФУНЦКИЯ РЕНДЕРА ССЫЛКИ===================\nfunction renderPage(index, active = '') {\n  return ` <li class=\"pg-item ${active}\" data-page=\"${index}\">\n        <a class=\"pg-link\" href=\"#\">${index}</a>\n    </li>`;\n}\n\n// ФУНКЦИЯ КЛИК============================================\n//АКТИВНОСТЬ И НЕАКТИВНОСТЬ КНОПОК\n\ndocument\n  .querySelector('.page-container')\n  .addEventListener('click', function (e) {\n    handleButton(e.target);\n  });\n\nfunction handleButton(element) {\n  if (element.classList.contains('prev-page')) {\n    valuePage.curPage--;\n\n    handleButtonLeft();\n    btnNextPg.disabled = false;\n  } else if (element.classList.contains('next-page')) {\n    valuePage.curPage++;\n    handleButtonRight();\n    btnPrevPg.disabled = false;\n  }\n  pagination();\n}\n\n//дисаблед на лево\nfunction handleButtonLeft() {\n  if (valuePage.curPage === 1) {\n    btnPrevPg.disabled = true;\n  } else {\n    btnPrevPg.disabled = false;\n  }\n}\n\n//дисаблед на право\nfunction handleButtonRight() {\n  if (valuePage.curPage === valuePage.totalPages) {\n    console.log(valuePage.curPage);\n    btnNextPg.disabled = true;\n  } else {\n    btnNextPg.disabled = false;\n  }\n}\n"],"names":["$1bab9c519cfa82bc$var$newsList","document","querySelector","$1bab9c519cfa82bc$var$pg","getElementById","$1bab9c519cfa82bc$var$btnNextPg","$1bab9c519cfa82bc$var$btnPrevPg","$1bab9c519cfa82bc$var$start","$1bab9c519cfa82bc$var$end","$1bab9c519cfa82bc$var$valuePage","curPage","numLinksTwoSide","totalPages","addEventListener","async","news","$1bab9c519cfa82bc$var$fetchUsers","console","log","Math","ceil","results","length","$1bab9c519cfa82bc$var$renderNewsList","error","message","response","fetch","json","markup","slice","map","user","abstract","url","join","innerHTML","$1bab9c519cfa82bc$var$pagination","delta","range","render","renderTwoSide","dot","countTruncate","numberTruncateLeft","numberTruncateRight","active","pos","$1bab9c519cfa82bc$var$renderPage","index","$1bab9c519cfa82bc$var$handleButtonLeft","disabled","$1bab9c519cfa82bc$var$handleButtonRight","e","parseInt","target","dataset","page","pageNumber","element","classList","contains","$1bab9c519cfa82bc$var$handleButton"],"version":3,"file":"index.23d4e470.js.map"}