{"mappings":"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","sources":["src/js/pagination.js"],"sourcesContent":["const newsList = document.querySelector('.news-list');\n\nconst pg = document.getElementById('pagination');\nconst btnNextPg = document.querySelector('button.next-page');\nconst btnPrevPg = document.querySelector('button.prev-page');\n\nlet start = 0;\nlet end = 7;\n\nconst valuePage = {\n  curPage: 1, //текущая страница ЭТО ПЕРЕДАВАТЬ ДЛЯ СТАРТА\n  numLinksTwoSide: 1, //количество ссылок две стороны от выделенного до ...\n  totalPages: 10, // длинна массива данных, или свойство длинны объекта / на 7 и округленное до целого числа\n};\n\ndocument.addEventListener('DOMContentLoaded', async () => {\n  try {\n    const news = await fetchUsers();\n    console.log(news);\n    valuePage.totalPages = Math.ceil(news.results.length / 7);\n    renderNewsList(news);\n  } catch (error) {\n    console.log(error.message);\n  }\n});\n\n// https://api.nytimes.com/svc/news/v3/content/nyt/world.json?api-key=KAPQs6eCC914vuVn4Z5KoZgqCNfPIWAH\n\nconst fetchUsers = async () => {\n  const response = await fetch(\n    'https://api.nytimes.com/svc/mostpopular/v2/viewed/1.json?api-key=KAPQs6eCC914vuVn4Z5KoZgqCNfPIWAH'\n  );\n  const news = await response.json();\n  return news;\n};\n\nfunction renderNewsList(news) {\n  const markup = news.results\n    .slice(start, end)\n    .map(\n      user => `<li class=\"news-card\">\n       <p>${user.abstract}</p>\n      <a href=\"${user.url}\">Read more</a>\n      </li>`\n    )\n    .join('');\n  newsList.innerHTML = markup;\n}\n\n// ПАГИНАЦИЯ============================================\n\npagination();\n\n// ФУНКЦИЯ КЛИК============================================\n\npg.addEventListener('click', async e => {\n  try {\n    const news = await fetchUsers();\n\n    console.log(parseInt(e.target.dataset.page, 10));\n    if (e.target.dataset.page) {\n      const pageNumber = parseInt(e.target.dataset.page, 10);\n\n      valuePage.curPage = pageNumber;\n      //вызывается пагинация\n      pagination(valuePage);\n      console.log(valuePage);\n\n      start = (pageNumber - 1) * 7;\n      end = start + 7;\n\n      renderNewsList(news);\n      handleButtonLeft();\n      handleButtonRight();\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n});\n\n// DYNAMIC PAGINATION\nfunction pagination() {\n  const { totalPages, curPage, numLinksTwoSide: delta } = valuePage;\n\n  const range = delta + 4; // use for handle visible number of links left side\n  // использовать для обработки видимого количества ссылок слева\n\n  let render = '';\n  let renderTwoSide = '';\n  let dot = `<li class=\"pg-item\"><a class=\"pg-link\">...</a></li>`;\n  let countTruncate = 0; // use for ellipsis - truncate left side or right side\n  // использовать для многоточия - обрезать левую или правую сторону\n\n  // use for truncate two side\n  // используем для усечения двух сторон\n  const numberTruncateLeft = curPage - delta; //число Обрезать слева\n  const numberTruncateRight = curPage + delta; //число Обрезать слева\n\n  let active = '';\n  for (let pos = 1; pos <= totalPages; pos++) {\n    active = pos === curPage ? 'active' : '';\n\n    // truncate обрезать\n    if (totalPages >= 2 * range - 1) {\n      if (numberTruncateLeft > 3 && numberTruncateRight < totalPages - 3 + 1) {\n        // truncate 2 side\n        if (pos >= numberTruncateLeft && pos <= numberTruncateRight) {\n          renderTwoSide += renderPage(pos, active);\n        }\n      } else {\n        // truncate left side or right side\n        //обрезать левую или правую сторону\n        if (\n          (curPage < range && pos <= range) ||\n          (curPage > totalPages - range && pos >= totalPages - range + 1) ||\n          pos === totalPages ||\n          pos === 1\n        ) {\n          render += renderPage(pos, active);\n        } else {\n          countTruncate++;\n          if (countTruncate === 1) render += dot;\n        }\n      }\n    } else {\n      // not truncate\n      render += renderPage(pos, active);\n    }\n  }\n\n  if (renderTwoSide) {\n    renderTwoSide =\n      renderPage(1) + dot + renderTwoSide + dot + renderPage(totalPages);\n    pg.innerHTML = renderTwoSide;\n  } else {\n    pg.innerHTML = render;\n  }\n}\n\n// ФУНЦКИЯ РЕНДЕРА ССЫЛКИ===================\nfunction renderPage(index, active = '') {\n  return ` <li class=\"pg-item ${active}\" data-page=\"${index}\">\n        <a class=\"pg-link\" href=\"#\">${index}</a>\n    </li>`;\n}\n\n// ФУНКЦИЯ КЛИК============================================\n//АКТИВНОСТЬ И НЕАКТИВНОСТЬ КНОПОК\n\ndocument\n  .querySelector('.page-container')\n  .addEventListener('click', function (e) {\n    handleButton(e.target);\n  });\n\nfunction handleButton(element) {\n  if (element.classList.contains('prev-page')) {\n    valuePage.curPage--;\n\n    handleButtonLeft();\n    btnNextPg.disabled = false;\n  } else if (element.classList.contains('next-page')) {\n    valuePage.curPage++;\n    handleButtonRight();\n    btnPrevPg.disabled = false;\n  }\n  pagination();\n}\n\n//дисаблед на лево\nfunction handleButtonLeft() {\n  if (valuePage.curPage === 1) {\n    btnPrevPg.disabled = true;\n  } else {\n    btnPrevPg.disabled = false;\n  }\n}\n\n//дисаблед на право\nfunction handleButtonRight() {\n  if (valuePage.curPage === valuePage.totalPages) {\n    console.log(valuePage.curPage);\n    btnNextPg.disabled = true;\n  } else {\n    btnNextPg.disabled = false;\n  }\n}\n"],"names":["$bpxeT","parcelRequire","$dfaf77c789ce7a24$var$newsList","document","querySelector","$dfaf77c789ce7a24$var$pg","getElementById","$dfaf77c789ce7a24$var$btnNextPg","$dfaf77c789ce7a24$var$btnPrevPg","$dfaf77c789ce7a24$var$start","$dfaf77c789ce7a24$var$end","$dfaf77c789ce7a24$var$valuePage","curPage","numLinksTwoSide","totalPages","addEventListener","$parcel$interopDefault","$2TvXO","mark","_callee","news","$dfaf77c789ce7a24$var$fetchUsers","_ctx","sent","console","log","Math","ceil","results","length","$dfaf77c789ce7a24$var$renderNewsList","t0","message","response","fetch","json","markup","slice","map","user","concat","abstract","url","join","innerHTML","$dfaf77c789ce7a24$var$pagination","delta","range","render","renderTwoSide","dot","countTruncate","numberTruncateLeft","numberTruncateRight","active","pos","$dfaf77c789ce7a24$var$renderPage","index","arguments","$dfaf77c789ce7a24$var$handleButtonLeft","disabled","$dfaf77c789ce7a24$var$handleButtonRight","e","pageNumber","parseInt","target","dataset","page","element","classList","contains","$dfaf77c789ce7a24$var$handleButton"],"version":3,"file":"index.742f2f0a.js.map"}